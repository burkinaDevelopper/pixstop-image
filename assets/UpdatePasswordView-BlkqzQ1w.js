import{k as _,z as w,u as v,r as c,c as h,a as o,d as g,_ as b,e as V,w as k,f as d,C as y,o as p,q as u,S as n}from"./index-82YUfLJa.js";import{_ as l}from"./BaseInput-C2a4K11z.js";const C={class:"page-wrapper"},S=y('<div class="container-xl"><div class="page-header d-print-none"><div class="row g-2 align-items-center"><div class="col"><h2 class="page-title"></h2></div></div></div></div>',1),x={class:"page-body"},U={class:"container-xl"},N={class:"row row-cards"},B={class:"col-12"},E={class:"row"},O={form:"form-fieldset"},$={class:"mb-3"},P={class:"mb-3"},j={class:"mb-3"},q=o("button",{type:"submit",class:"btn btn-primary"},"Envoyer",-1),A={__name:"UpdatePasswordView",setup(z){const a=_();w();const m=v(),t=c({password:"",current_password:"",password_confirmation:""}),r=c({errors:[]}),f=async()=>{var i;r.errors=[],await u.get("/sanctum/csrf-cookie"),await u.post("/user/password/"+((i=m.getUser)==null?void 0:i.id),t).then(s=>{s.data.success&&n.fire({icon:"success",title:"Succes",allowOutsideClick:!1,text:s.data.message}).then(e=>{e.isConfirmed&&a.go(0)})}).catch(s=>{if(console.log(s),s.response.data.error&&n.fire({icon:"error",title:"Error",allowOutsideClick:!1,text:s.response.data.error}).then(e=>{e.isConfirmed&&a.go(0)}),s.response.status===422)for(const e in s.response.data.errors)r.errors.push(s.response.data.errors[e][0]+" ");s.response.status===500&&(r.errors.push(s.response.data.message),console.log(s)),r.errors.length&&n.fire({icon:"error",title:"Error",allowOutsideClick:!1,html:r.errors.join("<br>")}).then(e=>{e.isConfirmed&&a.go(0)})})};return(i,s)=>(p(),h("div",C,[S,o("div",x,[o("div",U,[o("div",N,[o("div",B,[r.errors.length?(p(),g(b,{key:0,errors:r.errors},null,8,["errors"])):V("",!0),o("form",{onSubmit:s[3]||(s[3]=k(e=>f(),["prevent"])),method:"post"},[o("div",E,[o("fieldset",O,[o("div",$,[d(l,{modelValue:t.current_password,"onUpdate:modelValue":s[0]||(s[0]=e=>t.current_password=e),label:"Current password",type:"password"},null,8,["modelValue"])]),o("div",P,[d(l,{modelValue:t.password,"onUpdate:modelValue":s[1]||(s[1]=e=>t.password=e),label:"New password",type:"password"},null,8,["modelValue"])]),o("div",j,[d(l,{modelValue:t.password_confirmation,"onUpdate:modelValue":s[2]||(s[2]=e=>t.password_confirmation=e),label:"Confirm password",type:"password"},null,8,["modelValue"])])]),q])],32)])])])])]))}};export{A as default};
