import{u as V,r as x,o as l,c as u,F as $,s as S,p as y,e as h,a as e,t as a,b as s,x as w,d as C,_ as N,n as B,v as U,f,w as z,k as M,y as T,z as F,A as I,g as P}from"./index-82YUfLJa.js";import{_ as k}from"./BaseInput-C2a4K11z.js";const R={class:"m-4"},D={key:1},E={class:"card-body"},L=e("h2",{class:"card-title text-center mb-4"},"Laisser un commentaire",-1),j=e("label",{for:"content",class:"form-label"},null,-1),A={__name:"Comment",props:["comments","post","errors"],emits:{submit:i=>!0},setup(i,{emit:v}){var p;const c=i,o=V(),r=x({content:"",post_id:c.post.id,user_id:((p=o.getUser)==null?void 0:p.id)??null}),g=v,b=()=>{g("submit",r),setTimeout(()=>{r.content=""},1e3)};return(d,n)=>(l(),u("div",R,[i.comments&&i.comments.length?(l(!0),u($,{key:0},S(i.comments,t=>{var m,_;return l(),u("div",{key:t.id},[(_=(m=t==null?void 0:t.user)==null?void 0:m.avatar)!=null&&_.thumbnail_url?(l(),u("span",{key:0,class:"avatar me-3 rounded",style:y({backgroundImage:`url(${t.user.avatar.thumbnail_url})`})},null,4)):h("",!0),e("h4",null,a(t.user.name)+" - "+a(s(w)(t.created_at).fromNow()),1),e("p",null,a(t.content),1)])}),128)):h("",!0),s(o).loggedIn?(l(),u("div",D,[e("form",{onSubmit:z(b,["prevent"]),method:"post",class:"card card-md"},[e("div",E,[L,c.errors.length?(l(),C(N,{key:0,errors:c.errors},null,8,["errors"])):h("",!0),j,B(e("textarea",{class:"form-control",cols:"30",rows:"10",placeholder:"commentaires","onUpdate:modelValue":n[0]||(n[0]=t=>r.content=t)},null,512),[[U,r.content]]),f(k,{modelValue:r.post_id,"onUpdate:modelValue":n[1]||(n[1]=t=>r.post_id=t),type:"hidden"},null,8,["modelValue"]),f(k,{modelValue:r.user_id,"onUpdate:modelValue":n[2]||(n[2]=t=>r.user_id=t),type:"hidden"},null,8,["modelValue"]),e("button",{onClick:n[3]||(n[3]=(...t)=>d.submit&&d.submit(...t)),type:"submit",class:"btn btn-primary"}," Envoyer ")])],32)])):h("",!0)]))}},H={class:"page-wrapper"},q={class:"container-xl"},G={class:"page-header d-print-none"},J={class:"row g-2 align-items-center"},K={class:"col"},O={class:"page-title"},Q=["href"],W=["data-src","alt"],X={class:"card-body"},Y={class:"card-title"},Z={class:"card-text"},ee={class:"pt-2"},te={class:"text-muted"},se={class:"mt-"},oe=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-message-circle"},[e("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1"})],-1),re={class:"count"},le={__name:"PostView",setup(i){M();const v=T(),c=F(),{post:o,errors:r}=I(c),{getPost:g,saveComment:b}=c;g(v.params.slug);const p=d=>{console.log(d),b(d)};return(d,n)=>{var t,m,_;return l(),u("div",H,[e("div",q,[e("div",G,[e("div",J,[e("div",K,[e("h2",O,a(s(o).title),1)])])]),e("a",{href:s(o).photo.url,target:"_blank",rel:"noopener noreferrer"},[e("img",{"data-src":s(o).photo.url,alt:s(o).title,async:"decoding",class:"card-img-top lazyload"},null,8,W)],8,Q),e("div",X,[e("h2",Y,a(s(o).title),1),e("p",Z,a(s(o).content),1),e("div",null,[e("span",{class:"avatar me-3 rounded",style:y({backgroundImage:`url(${(_=(m=(t=s(o))==null?void 0:t.user)==null?void 0:m.avatar)==null?void 0:_.thumbnail_url})`})},null,4),e("div",ee,a(s(o).user.name),1),e("div",te,a(s(w)(s(o).created_at).fromNow()),1)])]),e("div",se,[e("h3",null,[oe,e("span",re,a(s(o).comments_count),1),P(" Commentaires ")]),f(A,{comments:s(o).comments,post:s(o),onSubmit:p,errors:s(r)},null,8,["comments","post","errors"])])])])}}};export{le as default};
